function signInButton(){var e={Username:document.getElementById("inputUsername").value,Password:document.getElementById("inputPassword").value},o=new AmazonCognitoIdentity.AuthenticationDetails(e),n=new AmazonCognitoIdentity.CognitoUserPool(poolData),t={Username:document.getElementById("inputUsername").value,Pool:n},s=new AmazonCognitoIdentity.CognitoUser(t),r="";s.authenticateUser(o,{onSuccess:function(e){e.getAccessToken().getJwtToken(),console.log("Login - Response :"+JSON.stringify(e)),redirectUserAfterLogin(e)},onFailure:function(e){$(".error-msg").removeClass("d-none"),$(".error-msg").html(e.message),console.log(e.message||JSON.stringify(e))},newPasswordRequired:function(e){delete e.email_verified,delete e.name,r=e,console.log("user Attributes - ",e),$("#new-password-challenge").modal("show"),$("#new-password-challenge-form").on("submit",(function(e){e.preventDefault();var o=$(".given-name").val(),n=$(".new-password").val();r.name=o,s.completeNewPasswordChallenge(n,r,{onSuccess:function(e){console.log("success -",e),redirectUserAfterLogin(e)},onFailure:function(e){console.log("error - ",e),$(".newpass-error-msg").removeClass("d-none").html(e.message)}})}))}})}function forgetPassword(){cognitoUser.forgotPassword({onSuccess:function(e){console.log("CodeDeliveryData from forgotPassword: "+e)},onFailure:function(e){alert(e.message||JSON.stringify(e))},inputVerificationCode:function(e){console.log("Code sent to: "+e);document.getElementById("code").value;var o=document.getElementById("new_password").value;cognitoUser.confirmPassword(verificationCode,o,{onSuccess(){console.log("Password confirmed!")},onFailure(e){console.log("Password not confirmed!")}})}})}function redirectUserAfterLogin(e){e.idToken.payload.hasOwnProperty("cognito:groups")?window.location.href="https://overlord-mmorpg.github.io/telepsychplus/":window.location.href="./home.html"}function hideShowPassword(e){"password"==$("#"+e).attr("type")?$("#"+e).attr("type","text"):$("#"+e).attr("type","password")}$("input,select,textarea").on("focus",()=>$(".error-msg").addClass("d-none")),$("#sign-up-form").on("submit",(function(e){e.preventDefault();let o=form2js("sign-up-form",".",!0,null);if(null!=o.phone_number&&(o.phone_number="+"+$(".tel-phone-input").intlTelInput("getSelectedCountryData").dialCode+o.phone_number),o.password!=o.confirm_password)return $(".error-msg").removeClass("d-none").html("Password and Confirm Password Does not Match."),!1;const n=o.password;delete o.password,delete o.confirm_password;var t=new AmazonCognitoIdentity.CognitoUserPool(poolData),s=[];for(const[e,n]of Object.entries(o))s.push({Name:e,Value:n});$("#sign-up-form button[type=submit]").prop("disabled",!0).html('\n    <span class="spinner-border spinner-border-sm" role="status"></span> Submiting\n  '),t.signUp(o.email,n,s,null,(function(e,o){if(e)return $(".error-msg").removeClass("d-none").html(e.message),void console.log(e.message||JSON.stringify(e));$("#sign-up-form button[type=submit]").prop("disabled",!1).html("Submit"),$.showModal({title:"Sign-Up Successful",body:"Check Email and verify your account"}),setTimeout((function(){window.location.href=signinPage}),1e4)}))}));