var userPool=new AmazonCognitoIdentity.CognitoUserPool(poolData),cognitoUser=userPool.getCurrentUser();function getUserGroups(){cognitoUser.getSession((function(o,e){return o?(console.log(o),null):result.idToken.payload.hasOwnProperty("cognito:groups")?result.idToken.payload["cognito:groups"][0]:"patient"}))}function signOut(){sessionStorage.clear(),null!=cognitoUser&&cognitoUser.signOut(),window.location.href="./"+signinPage}function getUserAttributes(){if(null==cognitoUser)return null;cognitoUser.getSession((function(o,e){o?console.log("error -",o):(e.isValid()||signOut(),sessionStorage.setItem("uid",e.idToken.payload.sub),sessionStorage.setItem("email",e.idToken.payload.email),cognitoUser.getUserAttributes((function(o,e){if(o)return void console.log(o);let n={};return e.forEach((o,e)=>{n[o.Name]=o.Value}),n})))}))}null!=cognitoUser?cognitoUser.getSession((function(o,e){o?console.log("error -",o):(e.isValid()||signOut(),sessionStorage.setItem("pid",e.idToken.payload.sub),sessionStorage.setItem("pt-email",e.idToken.payload.email),cognitoUser.getUserAttributes((function(o,e){if(o)return void console.log(o);let n={};e.forEach((o,e)=>{n[o.Name]=o.Value}),$("#patient-name").html(getUserName(n))})))})):window.location.href="./"+signinPage;