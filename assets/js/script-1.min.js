var userPool=new AmazonCognitoIdentity.CognitoUserPool(poolData),cognitoUser=userPool.getCurrentUser();function getUserGroups(){cognitoUser.getSession((function(e,o){return e?(console.log(e),null):result.idToken.payload.hasOwnProperty("cognito:groups")?result.idToken.payload["cognito:groups"][0]:"patient"}))}function signOut(){sessionStorage.clear(),null!=cognitoUser&&cognitoUser.signOut(),window.location.href="./"+signinPage}function getUserAttributes(){if(null==cognitoUser)return null;cognitoUser.getSession((function(e,o){e?console.log("error -",e):(o.isValid()||signOut(),sessionStorage.setItem("uid",o.idToken.payload.sub),sessionStorage.setItem("email",o.idToken.payload.email),cognitoUser.getUserAttributes((function(e,o){if(e)return void console.log(e);let t={};return o.forEach((e,o)=>{t[e.Name]=e.Value}),t})))}))}function checkPayments(e,o){getResponse(`/users/${sessionStorage.getItem("pid")}/payments`,{event_id:e,payment_ref:o},(function(e){console.log("check payment - res - ",e),200==e.statusCode&&"Paid"===e.payment_status&&setTimeout(()=>{location.reload()},1e4)}))}null!=cognitoUser?cognitoUser.getSession((function(e,o){e?console.log("error -",e):(o.isValid()||signOut(),sessionStorage.setItem("pid",o.idToken.payload.sub),sessionStorage.setItem("pt-email",o.idToken.payload.email),cognitoUser.getUserAttributes((function(e,o){if(e)return void console.log(e);let t={};o.forEach((e,o)=>{t[e.Name]=e.Value}),$("#patient-name").html(getUserName(t))})))})):window.location.href="./"+signinPage;