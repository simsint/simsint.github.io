var response="",data=(response=default_survey).body,surveyContent="";surveyContent+='<div class="text-center py-3">';for(var i=data.sections.length;i>0;i--)surveyContent+='<span class="step"></span>';function takeSurvey(){$("#surveyForm").html(surveyContent),showTab(currentTab)}function onSurveySubmit(){var e=response.body;let t={},s=!1;t.name=e.name,t.description=e.description,t.created=e.created,t.updated=e.updated,t.sections=[],e.sections.forEach(e=>{let n={};n.title=e.title,n.questions=[],n.totalQuestions=0,n.sectionType=e.sectionType,e.questions.forEach(e=>{if(n.totalQuestions+=1,$(`input[name="${e.en}"]:checked`).val()){s=!0;let t={};t.en=e.en,t.ar=e.ar,t.value=$(`input[name="${e.en}"]:checked`).val(),n.questions.push(t)}}),s&&t.sections.push(n),s=!1});let n={};null!=sessionStorage.getItem("pt-email")&&(n.email=sessionStorage.getItem("pt-email")),n.survey=t,console.log("Submit FORM "+JSON.stringify(n)),$.ajax({url:`${ENDPOINT}/users/${sessionStorage.getItem("pid")}/checklist`,method:"POST",contentType:"application/json",dataType:"json",data:JSON.stringify(n),processData:!1}).done((function(e){201!=e.statusCode&&(console.log("response - ",e),$.toast({icon:"danger",text:`<p class='p-3'>Error Message - ${e.message}</p>`,delay:"3000",position:"top-right",dismissible:!1})),201==e.statusCode&&($.toast({icon:"success",text:"<p class='p-3'>survey send successfull</p>",delay:"3000",position:"top-right",dismissible:!1}),setTimeout(()=>{location.reload()},3e3))})).fail((function(e){console.log("error - ",e)})).always((function(e){}))}surveyContent+='<button class="btn btn-primary float-right px-4" type="button" id="skipBtn" onclick="nextPrev(1)">Skip</button>',surveyContent+="</div>",data.sections.forEach(e=>{surveyContent+=`<div class="tab">\n                        <h3 class="text-center">${e.title.en}</h3>\n                        <h3 class="arabic-text text-center">${e.title.ar}</h3>`,"scale"===e.sectionType?(e.questions.forEach(e=>{surveyContent+=`<hr/><div class="form-group">\n                              <p>${e.en}</p>\n                              <p class="arabic-text text-right">${e.ar}</p>`,surveyContent+='<table class="table-borderless w-100 text-center"><tr>',$.each(e.labels,(function(e,t){surveyContent+=`<th><span class="label"> ${t.label.en}</span></th>`})),surveyContent+="</tr><tr>",$.each(e.labels,(function(t,s){surveyContent+=`<td class="text-center">\n            <input type="radio" name="${e.en}" value="${s.label.value}">\n            </td>`})),surveyContent+="</tr></table>",surveyContent+="</div>"}),surveyContent+="</div>"):"boolean"===e.sectionType&&(e.questions.forEach(e=>{surveyContent+=`<hr/><div class="form-group">\n                              <p>${e.en}</p>\n                              <p class="arabic-text text-right">${e.ar}</p>\n                                    <table class="table-borderless w-100 text-center">\n                                      <tr>\n                                            <th>TRUE</th>\n                                            <th>FALSE</th>\n                                        </tr>\n                                        <tr>\n                                            <td class="text-center"><input type="radio" name="${e.en}" value="true"></td>\n                                            <td class="text-center"><input type="radio" name="${e.en}" value="false"></td>\n                                        </tr>\n                                    </table>\n                          </div>`}),surveyContent+="</div>")}),takeSurvey();